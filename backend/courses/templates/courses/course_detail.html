{% extends "base.html" %}
{% block title %}{{ course.title }}{% endblock %}
{% block content %}
<h2>{{ course.title }}</h2>
{% if course.cover_image %}
<img src="{{ course.cover_image.url }}" alt="{{ course.title }}" class="img-fluid mb-3" style="max-height: 300px; object-fit: cover;">
{% endif %}
<p><strong>Instructor:</strong> {{ course.instructor }}</p>
<p>{{ course.description }}</p>
<p><strong>Price: </strong>{% if course.price > 0 %}â‚¹{{ course.price }}{% else %}Free{% endif %}</p>
<p><strong>Rating:</strong> {{ course.rating }}</p>
<p><strong>Total Students:</strong> {{ course.total_students }}</p>
<p><strong>Categories:</strong>
    {% for cat in course.categories.all %}
        <span class="badge bg-secondary">{{ cat.name }}</span>
    {% empty %}
        None
    {% endfor %}
</p>

<h3>Lessons</h3>
{% if lessons %}
<ul class="list-group">
    {% for lesson in lessons %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ lesson.order }}. {{ lesson.title }} ({{ lesson.get_content_type_display }})
        {% if lesson.content_type == 'video' and lesson.video_url %}
            <a href="{{ lesson.video_url }}" target="_blank" class="btn btn-sm btn-outline-primary">Watch Video</a>
        {% elif lesson.content_file %}
            <a href="{{ lesson.content_file.url }}" target="_blank" class="btn btn-sm btn-outline-secondary">Download</a>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No lessons added yet.</p>
{% endif %}
<a href="{% url 'courses:course_list' %}" class="btn btn-secondary mt-3">Back to courses</a>
{% endblock %}
